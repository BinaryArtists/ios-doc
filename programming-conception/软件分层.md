# [软件分层](http://blog.csdn.net/itianyi/article/details/9002019)

在分解复杂的软件系统时，软件设计者用的最多的技术之一就是分层。

## 角度

区分物理层和逻辑层，业务逻辑层和数据库层运行在同一台机器上，这台机器即是应用服务器，又是数据库服务器，因此整个系统物理上分为两层，而逻辑上分为三层结构。

### 物理分层

每一层都运行在单独的机器上，这意味着创建分布式的软件系统

### 逻辑分层

在单个软件模块中完成特定的功能

## 特征

软件层必须符合以下特征：
1、  每个层由一组相关的类或组件（如EJB）构成，共同完成特定的功能。
2、  层与层之间存在自上而下的依赖关系，即上层组件会访问下层组建的API，而下层组件不应该依赖上层组件。例如：表述层依赖于业务逻辑层，而业务逻辑层依赖于数据库层。（基本特征）
3、  每个层对上层公开API，但具体的实现细节对外透明。当某一层的实现发生变化，只要它的API不变，不会影响其它层的实现。（向上公开接口，封装实现细节）

## 优点

软件分层，将会提高软件的以下性能。
1、  伸缩性（指应用程序是否支持更多的用户）
2、  可维护性（指的是当发生需求变化，只需修改软件的某一部分，不会影响其它部分的代码。层数越多，可维护性也会不断提高）
3、  可扩展性（指的是在现有系统中增加新功能的难易程度）层数越少，增加新功能就越容易破坏现有的程序结构。层数越多，就可以在每个层中提供扩展点，不会打破应用的整体框架。
4、  可重用性（指的是程序代码没有冗余，同一个程序能满足各种需求）
5、  可管理性（管理系统的难易程度）

## 缺点 （或者称为：副作用）

软件分层越多，对软件设计人员的要求就越高。在设计阶段，必须花时间构思合理的体系结构。此外，软件层越多，调试会越困难。如果应用规模比较小，业务逻辑很简单，软件层数少反而会简化开发流程并提高开发效率。

## 应用分层 角度

1、经典的三层理论将应用分为三个层次
       （1）表现层(Presentation Layer)：显示信息，处理用户的请求
       （2）领域/逻辑层(Domain Logic Layer)：逻辑，实际的业务活动，系统中真正的核心
       （3）数据访问层(Data Access Layer)：与数据库、消息系统等的通信
       实际应用中，有四层的五层(如：J2EE)的。在 Windows .NET 中表示层可以通用数据感知组件访问数据库，使用很方便。但是这种技术破坏了层和层之间的依赖关系，对于大型软件的开发一般是不允许的，小型软件使用也未尝不可。
2、基本原则：领域层和数据源层绝对不要依赖于表现层。

### 表现层

用户界面，Web页面或Windows窗体。

### 领域层

领域逻辑的组织，三个模式：
（1）事务脚本：结构化 
（2）领域模型：面向对象
（3）表模块：与记录集相关。.NET中含有基于记录集的工具(DataTable/DataSet)，则使用表模块较为方便。

### 数据访问层
    
为数据库表建立入口，使用入口的两种基本方法：
（1）行数据入口：每一行一个实例，面向对象的方式。
（2）表数据入口：记录集，如.NET中的DataTable，DataSet


## 参考

1. 《企业应用架构模式》