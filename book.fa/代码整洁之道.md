## 代码整洁之道 Bob大叔（2002年《敏捷软件开发：原则、模式、实践》）

> 1. 你是个程序员 2. 你想成为更好的程序员，不满足其一，请止步。

### 序

1. 建筑师，路德维西-密斯-范-德-罗：神在细节之中。他专注于效用和基于宏伟架构之上的永恒建筑形式。

2. 在scrum和敏捷agile的日子里，人们关注的是快速将产品推向市场。

3. （全员生产维护，来自1951年日本）Total Productive Maintenance，TPM，质量保证手段。其主要支柱之一是所谓的5S原则体系：
  * 整理（Seiri）或者说：组织
  * 整顿（Seiton）或者说：整齐（想想英文中的系统化（systematize）一词）
  * 清楚（Seiso）或者说：清洁
  * 清洁（Seiketsu）或者说：标准化
  * 身美（Shitsuke）或者说：纪律（自律）

4. 丹麦有句谚语：“小处诚实非小事”，这句话，不只是教我们重视小处，更教我们小处要诚实。这意味着对代码诚实、对同僚坦诚代码现状，最重要的是在代码问题上不自欺。

### 前言

1. 你应当习得有关原则、模式和实践的知识

### 整洁代码

1. 我们要从各个方向来考察代码：从顶向下、从低往上、从里往外。

2. 有人认为，代码不再是问题，我们应当关注模型和需求。。扯淡！我们永远抛不掉代码，因为代码呈现了需求的细节。我期望语言的抽象程度继续提升。我也期望领域特定语言的数量继续增加。

3. 本书提到了《实现模式》这本书。

4. 混乱的代价、华丽新设计（没有对代码友好认识，谈设计就是乱弹琴）、态度

5. 什么是整洁代码？
  * 有多少程序员，就有多少定义，所以我们趋向于知名且经验丰富的程序员。
    > Bjarne Strousstrup 《C++程序设计语言》
    > Grady Booch 《面向对象分析与设计》
    > Dave Thomas OTI公司创始人，Eclipse战略教父
    > Michael Feathers 《修改代码的艺术》
    > Ron Jeffries 《极限编程实施》
    > Ward Cunningham Wiki发明者，极限编程的创始人之一，Smalltalk语言和面向对象的思想领袖

  * 破窗理论：窗户破损了的建筑让人觉得似乎无人照管，于是别人也再不关心。他们放任窗户继续破损。（最重要的是：）最终自己也参加破坏活动。

### 命名（变量、函数、参数、类、封包、目录等）：这事儿很严肃！！！！

1. 命名应该告诉你，它为什么会存在，它做什么事，应该怎么用

2. 缩写
  * 尽量使用容易辨认的缩写，不使用容易混淆的缩写：如hp（惠普？hypotenuse？）

3. 名字做有意义的区分，如果同时出现productInfo和productData，就很尴尬。
  * 基于此，你可能把a用于域内变量，而把the用于函数参数。
  * Variable一词永远不应当出现在变量名中
  * 名字字串，或许直接用name，比nameString更好
  * 对象命名，customerObject肯定比customer显得更冗余
  * 如果缺少明确约定，变量moneyAmount与money没区别，customerInfo和customer没区别，accountData和account没区别，theMessage与message没区别。

4. 名称要能读得出来
  *  可读性（得读得通顺，对吧？）

5. 使用可搜索的名称
  * 单字母名称、数字常量有个问题，就是很难在一大篇文字中找出来。
  * 用宏、枚举、静态全局变量，接口中包涵常量，

6. 避免使用编码
  * 不要把类型或者作用域编码进名称里
    >（我就不喜欢取名：ZLHomeViewController）

  * 匈牙利语标记法
    > Fortran 语言要求首字母体现出类型，导致了编码的产生

  * 成员前缀
    > 不要使用m_前缀标明成员变量。应当把类和函数做得足够小，消除对成员前缀的需求。
    > 应当使用某种可以高亮或用颜色标出成员的编辑环境。

  * 接口和实现
    > 接口命名为：IShapeFactory？不要这么干，宁可ShapeFactory，而实现用ShapeFactoryImp，甚至丑陋的CShapeFactory，都比对接口名称编码来的好。

7. 避免思维映射
    > 不应当让读者在脑中把你的名称翻译为他们熟知的名称，如循环计数器－到－其真实概念
    > 专业程序员知道，明确是王道。

8. 类名
    > 类名和对象名应该是名词或名词短语，不用动词
    > 如：Customer，AddressParser

9. 方法名
    > 动词或动词短语
    > 如：postPayment，deletePage
    > 属性访问器、修改器和断言应该根据其值命名，get、set、is为前缀
    > 重载了构造器时，使用描述参数的静态工厂方法名，如：
    > Complex fulcrumPoint = Complex.FromRealNumber(...)
    > 通常好于
    > Complex fulcrumPoint = new Complex(...)
    > 可以考虑将相应的构造器设置为private，强制使用这种命名手段！！！（赞）

10. 别玩幽灵名称
11. 每个概念对应于一个词
    > 给每个抽象概念选一个词，并且一以贯之！！！！！！
    > 如果，你一会儿使用get，一会儿fetch，一会儿retrieve，抱歉，别闹！！
    > 同样，一堆代码中，有controller，又有manager，还有driver，迷惑了：DeviceManager和ProtocolController之间有何根本分别

12. 别用双关语
    > 避免同一个词，用于不同目的。同一术语用于不同概念，基本上就是双关语。
    > 该用insert或append的时候，别用add！！！！

13. 使用解决方案领域名称
    > 尽情使用计算机科学术语、算法名、模式名、数学术语
    > 人们使用通用语言，人们也要事先了解这些概念

14. 使用源自所涉问题领域的名称
    > 如果不用13，那么就14吧
    > 优秀的程序员和设计师，其工作之一就是分离解决方案领域和问题领域的概念！！！（看离那边贴近）

15. 添加有意义的语境
    > 一个事实：很少有名称是能自我说明的；反之，需要用有良好命名的类、函数或命名空间来放置名称，给读者提供语境。
    > 给命名加前缀，是最后一招
    > firstName、lastName、street、houseNumber、city、state、zipcode，有这么些变量，但很散，需要一个语境：1. 比如添加addFirstName等方法，来说明，这是更大结构的一部分；2. 封装address类。
    > 有语境的变量！！！
    > 变量的语境，再看：函数名给出了部分语境；算法是剩下的部分。语境的增强，也让算法能够通过分解为更小的函数变得更干净利落。

16. 不要添加无用的语境
    > 如果有个加油站豪华版（Gas Station Deluxe）的应用，在其中给每个类，添加GSD前缀。不是好点子。
    > 基于上一条，自动补全工具，简直没法工作了！
    > 说白了，加前缀是体现语境，不然请去掉。

*取名字最难的在于：需要良好的描述技巧和共有的文化背景*

### 函数

### 注释


### 格式


### 对象和数据结构


### 错误处理


### 边界


### 单元测试


### 类


### 系统


### 迭代


### 并发


### 逐步改进


### JUnit


### 重构SerialDate

### 味道与启发


### 附录 A 并发编程


### 附录 B org.jfree.date.SerialDate
