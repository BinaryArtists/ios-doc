## App 启动流程


### iOS App 启动流程：


1. 在主线程中，加载启动界面

2. 在主线程中，检查更新

3. 在主线程中，注册微信SDK

4. 在主线程中，注册Fabric

5. 在后台线程中，初始化数据库

6. 在后台线程中，初始化本地模块（注1）

7. 在后台线程中，初始化网络数据模块（注2）

8. 初始化完成，再主线程切换相应的UI界面


iOS 本地模块初始化，注1：

1. 清空cache cookie

2. 如果不是首次打开APP，清空用户名密码，用来实现：卸载后重装不再支持自动登录

3. log收集模块初始化

4. 强制设置时区为东八区

5. qqfilelogmanager 初始化

6. 本地图片缓存配置

7. 子工程公共模块初始化

8. 高德地图初始化

9. 定位服务初始化，后台定位

10. app外观初始化

11. 网络接口初始化

12. 重置基础信息更新时间

13. 键盘管理初始化

14. 支付模块初始化

15. 远程通知初始化

16. 另起线程发送，app启动log、上次使用期间网络请求log


iOS 网络数据模块初始化，注2：

1. 设置网络接口的主server URL

2. 获取服务器时间

3. 拉去httpDNS列表

4. 步骤3成功后，拉取APP 配置信息：审核中隐藏项目、企业版是否可用（不可用的话，APP store 下载地址）

5. 步骤4成功后，拉取基础信息：年级，课程等

6. 步骤5成功后，自动登录

7. 步骤6成功后，拉取mqtt配置信息

8. 步骤7成功后，进入APP登录成后的UI

9. 获取其他信息，包括登录成功后需要获取的信息：地址列表等

10. 步骤3~8，任意一步骤失败，则进入登录界面。



Owner
